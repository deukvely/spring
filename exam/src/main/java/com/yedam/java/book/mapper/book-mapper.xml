<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.java.book.mapper.BookMapper">
	<select id="getBookList" resultType="BookVO">
		SELECT book_no
			   , book_name
			   , book_coverimg
			   , book_date
			   , book_price
			   , book_publisher
			   , book_info
		FROM book_tbl_06
		ORDER BY book_no
	</select>
	
	<select id="getBook" resultType="BookVO">
		SELECT book_no
			   , book_name
			   , book_coverimg
			   , book_date
			   , book_price
			   , book_publisher
			   , book_info
		FROM book_tbl_06
		WHERE book_no = #{bookNo}
	</select>
	
	<insert id="insertBook" parameterType="BookVO">
		<selectKey keyProperty="bookNo"
					resultType="int"
					order="BEFORE">
			SELECT NVL(MAX(book_no), 0) +1
			FROM book_tbl_06	
		</selectKey>
		INSERT INTO book_tbl_06
				(
					book_no
					, book_name
					, book_coverimg
					, book_date
					, book_price
					, book_publisher
					, book_info
				)
				values
				(
					#{bookNo}
					, #{bookName}
					, #{bookCoverimg}
					<choose>
						<when test="bookDate == null">
							, sysdate
						</when>
						<otherwise>
							, #{bookDate}
						</otherwise>
					</choose>
					, #{bookPrice}
					, #{bookPublisher}
					, #{bookInfo}
				)
	</insert>
	
	<update id="updateBook" parameterType="BookVO">
	
	</update>
	
	<delete id="deleteBook" parameterType="int">
	
	</delete>
	
	
	
	
	
</mapper>